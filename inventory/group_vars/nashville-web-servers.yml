---
#  nashville-web-servers Inventory Variables

default_org: iceburg-nashville


# Register private vars files
#############################
#
# filenames are relative to {{ pcd_private_vars }} path and do not need to exist
#

private_vars_files: [
  "nashville-web-servers.yml",
  "{{ inventory_hostname }}.yml"]


# Apache Site Definitions
#########################
#
#   name: (required, unique) apache ServerName, typically www.domain.com
#
#   org: (opt) site organization, defaults to {{ apache_sites_default_org }}
#
#   apache_alias: (opt) apache ServerAlias, e.g. "domain.com domain.net"
#
#   apache_config: (opt) template to use for apache config (virtualhost def),
#     defaults to "virtualhost_default.j2". relative to apache_sites/templates
#
#   apache_config_includes: (opt) files to include in the virtualhost definition
#     defaults to: []
#  
#   ssl: (opt) True/False to enable SSL
#      defaults to False. When True, apache_config will default to 
#      "virtualhost_default_ssl.j2", with http traffic redirected to https
#
#   ssl_ip: (opt) ip address of SSL host (e.g. <VirtualHost <ssl_ip>:443>)
#   ssl_key: (opt) key file, defaults to {{pcd_certs_dir }}/<name>.key
#   ssl_crt: (opt) certificate file, defaults to  {{pcd_certs_dir }}/<name>.crt
#
#   git_repo: (opt) git repository (clone URL) containing site(s)
#
#   git_branch: (opt) branch to checkout, defaults to "master"
#     target {{ apache_sites_user_home }}/git-checkouts/<git_repo>-<git_branch>
#     creates {{ apache_sites_user_home }}/<org>/<name>-<git_branch> as link,
#     e.g. /sites/ansible/www.domain.com  --> 
#          /sites/ansible/git-checkouts/<git_repo>-<git_branch>
#
#   docroot: (opt) document root / path to public web files within repository,
#      defaults to "www", can be empty string. e.g.
#      DocumentRoot /sites/ansible/www.domain.com-master/www
#
#   allow_override: (opt) True (AllowOverride All) or False (AllowOverride None)
#      defaults to False.
#      apache_sites recommends disabling overrides for performance. 
#      consider adding your .htaccess content via an include.
#
#########################

apache_sites_enabled_list:
  - {
    name: www.iceburg.net,
    org: iceburg,
    git_repo: "git@github.com:iceburg-net/www.iceburg.net.git",
    docroot: www-1,
    }
  - {
    name: staging.iceburg.net,
    org: iceburg,
    git_repo: "git@github.com:iceburg-net/www.iceburg.net.git",
    git_branch: stage,
    docroot: www-1,
    apache_config_includes: ['silverstripe-3'],
    ssl: True,
    ssl_ip: 10.0.0.33,
    }

